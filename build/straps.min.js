/** Straps Library 1.0.0, Copyright (c) 2014 Andy Gulley (http://www.github.com/flyandi) */
var STRAPS_LIB_SELF="straps.js",STRAPS_LIB_DEBUG=!0,STRAPS_ATTRIBUTES=["s-","straps-"],STRAPS_TAGS={div:"div",form:"form",css:"link",link:"link",script:"script"},STRAPS_CLASS_OPERATION={add:0,remove:1,replace:2,toggle:3},jd=function(a){alert(JSON.stringify(a))},Straps={modules:{},register:function(a,b){var c=this;return this.modules[a]?!1:(b.require&&b.require.forEach(function(a){return a.condition&&a.condition()?!1:void c.__attachscript(a.src)}),void(this.modules[a]=b))},cycleAttributes:function(a,b,c){var d=this;c=c?c:{},b.cycle(function(b,e){var f=d.attribute(a,b,!1,c.nostrap);if(f)switch(!0){case"function"==typeof e:e(f.value,f);break;case"object"==typeof e&&"function"==typeof e[1]:f.value.toLowerCase()==e[0].toLowerCase()&&e[1](f.value,f)}})},attribute:function(a,b,c,d){return d||STRAPS_ATTRIBUTES.forEach(function(c){a.attributes[c+b]&&(b=c+b)}),a.attributes[b]?a.attributes[b]:c?c:!1},find:function(a,b,c){"function"==typeof b&&(c=b,b=!1),b||(b=document);var d=b.querySelectorAll(a);switch(!0){case"function"==typeof c:d.cycle(function(a,b){b instanceof HTMLElement&&c(b)});break;case"number"==typeof c:d=d[c]&&d[c]instanceof HTMLElement?d[c]:!1;break;default:d=d.toElementList()}return d},classnames:function(a,b,c){try{var d=a.className.split(" ");if("string"==typeof b&&(b=b.split(",")),b instanceof Array){switch(!0){case c=STRAPS_CLASS_OPERATION.replace:d=b;break;default:b.forEach(function(a){switch(!0){case c==STRAPS_CLASS_OPERATION.remove:var b=d.indexOf(a);-1!=b&&d.splice(b,1);break;default:-1==d.indexOf(a)&&d.push(a)}})}a.className=d.join(" ")}}catch(e){console.log(e)}},triggerEvent:function(a,b,c){var d;c=c?c:{},window.CustomEvent?d=new CustomEvent(b,{detail:c}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c)),a.dispatchEvent(d)},extend:function(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},__load:function(){var a=this;this.scriptTag=document.querySelector("script[src$='straps.js']"),this.scriptTag&&(this.scriptPath=this.scriptTag.src.replace(STRAPS_LIB_SELF,""),this.cycleAttributes(this.scriptTag,{autodetect:["true",function(){a.__autodetect()}]},{nostrap:!0}))},__autodetect:function(){var a=this;({form:function(b){a.__attach("form",b)},_mask:function(b){a.__attach("mask",b)},_theme:function(b){a.__attach("theme",b)}}).cycle(function(a,b){if("_"==a.substr(0,1)){var c=[];STRAPS_ATTRIBUTES.forEach(function(b){c.push("["+b+a.substr(1)+"]")}),a=c.join(",")}var d=document.querySelectorAll(a);d&&Array.prototype.slice.call(d).forEach(function(a){b(a)})})},__attach:function(a,b){var c=this,d=this.__requiremodule(a,function(){c.__attach(a,b)});if(d){var e=d.invoke(this);e.attach(b);try{}catch(f){console.log(f)}}},__requiremodule:function(a,b){var c=this.modules[a]?this.modules[a]:!1;return c||arguments[2]?c:(this.__attachscript(this.scriptPath+"modules/straps."+a+".js",function(){"function"==typeof b&&b()}),!1)},__attachscript:function(a,b,c){var d=document.querySelector("head"),e=!1;switch(c){case STRAPS_TAGS.css:e=document.createElement("link"),e.href=a,e.rel="stylesheet";break;default:e=document.createElement("script"),e.type="text/javascript",e.src=a}"function"==typeof b&&(e.onload=function(){b()}),d.appendChild(e)},__prototypes:function(){Object.prototype.cycle=function(a){var b=this;Object.keys(this).forEach(function(c){if("function"==typeof a)try{a(c,b[c])}catch(d){this.__report(d)}})},Object.prototype.toElementList=function(){var a=[];return this.cycle(function(b,c){c instanceof HTMLElement&&a.push(c)}),a},Array.prototype.cycle=function(a){this.forEach(function(b,c){"function"==typeof a&&a(c,b)})},Straps.rid=function(a){return(a?a:"xxxysxx4xxxxxxxxxxx").replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)}).toUpperCase()}},__report:function(a){STRAPS_LIB_DEBUG&&console.log(a)}};!function(){Straps.__prototypes(),window.addEventListener("load",function(){setTimeout(function(){Straps.__load()},1)},!1)}();var __straps_instance_form=function(){function a(a){this.parent=a,this.__construct()}return a.prototype={strapsform:!1,pattern:!1,__construct:function(){for(var a=[],b="";a.length<22;)a.push(a.length);for(;b.length<11;){var c=Math.round(Math.random()*a.length);b+=String.fromCharCode(65+a[c]),a.splice(c,1)}this.pattern=b},attach:function(a){var b=this;this.target=a,this.tokens={},this.parent.cycleAttributes(a,{autosize:["true",function(){b.__autosize()}]}),this.parent.find("input:not([type=submit]),select,textarea",this.target,function(a){b.__naturalhook(a)}),this.target.addEventListener("submit",function(a){b.__submithandler()||a.preventDefault()}),this.naturals={begin:new Date,_keyticks:[],_mouseticks:[]};var c=!1,d=!1;document.addEventListener("mousemove",function(a){c&&clearTimeout(c),d||(d={x:a.pageX,y:a.pageY}),c=setTimeout(function(){b.__naturaltick(1,{dx:a.pageX>d.x?a.pageX-d.x:d.x-a.pageX,dy:a.pageY>d.y?a.pageY-d.y:d.y-a.pageY}),c=!1,d=!1},250)})},__naturalhook:function(a){var b=this,c=a.name+this.parent.rid("sxxx1yx"),d=document.createElement("input");d.type="hidden",d.name=c,d.value="",a.parentNode.appendChild(d),this.tokens[c]={reference:a},a.addEventListener("keypress",function(a){String.fromCharCode(a.which).match(/[A-Z]|[a-z]|[0-9]/gi)&&b.__naturaltick(2,this)},!1)},__naturaltick:function(a,b){switch(a){case 1:this.naturals._mouseticks.push(b);break;case 2:b.naturalticks||(b.naturalticks=[]),b.naturalticks.push(this.__ts())}},__naturalfilter:function(a){var b=this,c=a.naturalticks?a.naturalticks:!1,d="";if(!c)return!1;var e=!1,f=0,g=0,h=0;return c.forEach(function(a){d+=a+"Z";var c=b.__ts(a);g||(g=c),e&&(f+=c-e,h=c-g),e=c}),{avgtime:Math.round(f/c.length),total:h}},__ts:function(a){for(var b=a?a:(new Date).getTime().toString().split(""),c="",d=0;d<b.length;d++)c+=a?this.pattern.indexOf(b[d]):this.pattern[parseInt(b[d])];return a?parseInt(c):c},__submithandler:function(){var a=this,b=0,c=[],d=0,e=!0;if(this.parent.find("input:not([type=submit]),select,textarea",this.target,function(e){var f=e.value;a.parent.cycleAttributes(e,{required:function(c){a.__filter(f,c)||(a.parent.classnames(e,"straps-violation"),b++),d++}});var g=a.__naturalfilter(e);g&&c.push(g)}),!b){[function(){var a=d-b,e=Math.round(.8*a),f={nc:c.lengh>a-e||c.length<a+e};return f.nc},function(){},function(){}].forEach(function(a){e=a()}),e||alert("captcha");var f=document.createElement("input");f.type="hidden",f.name="_tick_"+input.name,f.value=this.token+"Z"+s,input.parentNode.appendChild(f)}return alert(b),!1},__filter:function(a,b){var c=!1;switch(!0){case/email/gi.test(b):c=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a);break;case/zip/gi.test(b):c=/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(a);break;case/true|notempty/gi.test(b):c=a||0===a}return c},__autosize:function(){var a=this,b={width:this.target.clientWidth,ratioLabel:.1*this.parent.attribute(this.target,"ratio-label",3),ratioInput:.1*this.parent.attribute(this.target,"ratio-input",6)};this.parent.find("field",this.target,function(c){var d=a.parent.find("label",c,0),e=a.parent.find("input:not([type=submit]),select",c),f=b.width*b.ratioLabel,g=Math.round((b.width*b.ratioInput-3*(e.length-1))/e.length);d&&(d.style.width=f+"px"),e.cycle(function(a,b){b.style.width=g+"px"})})}},a}();Straps.register("form",{invoke:function(a){return new __straps_instance_form(a)}});var __straps_instance_mask=function(){function a(a){this.parent=a,this.__construct()}return a.prototype={__construct:function(){},attach:function(a){this.target=a,this.mask()},caret:function(a,b,c){var d;return"number"!=typeof b?(a.setSelectionRange?(b=a.selectionStart,c=a.selectionEnd):document.selection&&document.selection.createRange&&(d=document.selection.createRange(),b=0-d.duplicate().moveStart("character",-1e5),c=b+d.text.length),{begin:b,end:c}):(c="number"==typeof c?c:b,void(a.setSelectionRange?a.setSelectionRange(b,c):a.createTextRange&&(d=a.createTextRange(),d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select())))},unmask:function(){this.parent.triggerEvent(this.target,"unmask")},mask:function(a,b,c){function d(a){for(;++a<x&&!w[a];);return a}function e(a){for(;--a>=0&&!w[a];);return a}function f(b,c){var e,f;if(!(0>b)){for(e=b,f=d(c);x>e;e++)if(w[e]){if(!(x>f&&w[e].test(z[f])))break;z[e]=z[f],z[f]=a.placeholder,f=d(f)}k(),o.caret(p,Math.max(y,b))}}function g(b){var c,e,f,g;for(c=b,e=a.placeholder;x>c;c++)if(w[c]){if(f=d(c),g=z[c],z[c]=e,!(x>f&&w[f].test(g)))break;e=g}}function h(a){var b,c,g,h=a.which;8===h||46===h||s&&127===h?(b=o.caret(p),c=b.begin,g=b.end,g-c===0&&(c=46!==h?e(c):g=d(c-1),g=46===h?d(g):g),j(c,g),f(c,g-1),a.preventDefault()):27==h&&(p.value=A,o.caret(p,0,l()),a.preventDefault())}function i(b){var c,e,h,i=b.which,l=o.caret(p);b.ctrlKey||b.altKey||b.metaKey||32>i||i&&(l.end-l.begin!==0&&(j(l.begin,l.end),f(l.begin,l.end-1)),c=d(l.begin-1),x>c&&(e=String.fromCharCode(i),w[c].test(e)&&(g(c),z[c]=e,k(),h=d(c),t||o.caret(p,h),a.completed&&h>=x&&a.completed.call(p))),b.preventDefault())}function j(b,c){var d;for(d=b;c>d&&x>d;d++)w[d]&&(z[d]=a.placeholder)}function k(){p.value=z.join("")}function l(b){var c,d,e=p.value,f=-1;for(c=0,pos=0;x>c;c++)if(w[c]){for(z[c]=a.placeholder;pos++<e.length;)if(d=e.charAt(pos-1),w[c].test(d)){z[c]=d,f=c;break}if(pos>e.length)break}else z[c]===e.charAt(pos)&&c!==partialPosition&&(pos++,f=c);return b?k():partialPosition>f+1?(p.value="",j(0,x)):(k(),p.value=p.value.substring(0,f+1)),partialPosition?c:y}var m=function(){var a=document.createElement("input"),b="onpaste";return a.setAttribute(b,""),"function"==typeof a[b]?"paste":"input"};c=c?c:this.target,b=b?b:this.parent.attribute(c,"mask").value;var n,o=this,p=c,q=m()+".mask",r=navigator.userAgent,s=/iphone/i.test(r),t=/android/i.test(r),u={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"};a=this.parent.extend({},{placeholder:u.placeholder,completed:null},a);var v=u.definitions,w=[],x=0,y=null;partialPosition=x=b.length,b.split("").forEach(function(a,b){"?"==a?(x--,partialPosition=b):v[a]?(w.push(new RegExp(v[a])),null===y&&(y=w.length-1)):w.push(null)}),this.unmask();var z=b.split("").map(function(b){return"?"!=b?v[b]?a.placeholder:b:void 0}),A=c.value;if(p.dataName=function(){return z.map(function(b,c){return w[c]&&b!=a.placeholder?b:null}).join("")},!this.parent.attribute(p,"readonly")){var B={unmask:function(){p.dataName=null},focus:function(){clearTimeout(n);var a;A=p.value,a=l(),n=setTimeout(function(){k(),a==b.length?o.caret(p,0,a):o.caret(p,a)},10)},blur:function(){l(),p.value!=A&&o.parent.triggerEvent(p,"change")},keydown:h,keypress:i};B[q]=function(){setTimeout(function(){var b=l(!0);o.caret(p,b),a.completed&&b==p.val().length&&a.completed.call(p)},0)},B.cycle(function(a,b){p.addEventListener(a,b)}),l()}}},a}();Straps.register("mask",{invoke:function(a){return new __straps_instance_mask(a)}});var __straps_instance_theme=function(){function a(a){this.parent=a,this.__construct()}return a.prototype={__construct:function(){},attach:function(a){this.target=a;var b=this.parent.attribute(this.target,"theme").value;this.target.className+="-straps-theme "+b}},a}();Straps.register("theme",{invoke:function(a){return new __straps_instance_theme(a)}});